#ifndef DRAWABLE_RECT_H
#define DRAWABLE_RECT_H

#include<functional>

#include "renderer.hpp"
#include "vector.hpp"
#include "transform.hpp"
#include "component_pool.hpp"

class Drawable {
    public:
        explicit Drawable (size_t transform_idx) : transform_idx (transform_idx) {}

    public:
        size_t transform_idx;
        std::function<void(std::vector<RenderCommand>&)> build_command;
};

namespace Drawables {
    
    std::function<RenderCommand(ComponentPool<Transform>& transform)> 
    render_rectangle(Drawable* self, Vector2D size, Vector3D color) 
    {
        return [=](ComponentPool<Transform>& transform) {
            return RenderCommand{transform.entry_at(self->transform_idx).data.value, size, color};
        };
    }

}

#endif
